{"ast":null,"code":"var _jsxFileName = \"/Users/samirsilva/org-chart/src/sunburst/sunburst.component.jsx\";\nimport React, { Component } from \"react\";\nimport * as d3 from \"d3\";\nimport Map from '../map/map.component';\nimport SearchBox from '../search/search.component';\nimport \"./sunburst.styles.scss\";\n\nclass Chart extends Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n\n  componentDidMount() {\n    var width = 100,\n        height = 100,\n        // % of the parent element\n    x = d3.scaleLinear().domain([0, width]).range([0, width]),\n        y = d3.scaleLinear().domain([0, height]).range([0, height]),\n        colors = [\"#1b9e77\", \"#d95f02\", \"#7570b3\", \"#e7298a\", \"#66a61e\", \"#e6ab02\", \"#a6761d\", \"#666666\"],\n        color = d3.scaleOrdinal().range(colors.map(function (c) {\n      c = d3.rgb(c); //c.opacity = 0.5; \n\n      return c;\n    })),\n        treemap = d3.treemap().size([width, height]) //.tile(d3.treemapResquarify) // doesn't work - height & width is 100%\n    .paddingInner(0).round(false),\n        //true\n    data = {\n      \"name\": \"Atores do Semiárido\",\n      \"id\": \"Atores do Semiárido\",\n      \"color\": \"#ffffff\",\n      \"children\": [{\n        \"name\": \"Instituição de Ensino Superior\",\n        \"id\": \"Instituição de Ensino Superior\",\n        \"color\": \"#D95F03\",\n        \"children\": [{\n          \"name\": \"Institutos Federais\",\n          \"id\": \"IF\",\n          \"color\": \"#A6761D\",\n          \"value\": 100\n        }, {\n          \"name\": \"Universidades Federais\",\n          \"id\": \"UF\",\n          \"color\": \"#666666\",\n          \"value\": 100\n        }, {\n          \"name\": \"Universidades Estaduais\",\n          \"id\": \"UE\",\n          \"color\": \"#249E77\",\n          \"value\": 100\n        }, {\n          \"name\": \"Universidades Privadas\",\n          \"id\": \"Privada\",\n          \"color\": \"#D95F03\",\n          \"value\": 100\n        }]\n      }, {\n        \"name\": \"Institutos de Pesquisa\",\n        \"id\": \"Institutos de Pesquisa\",\n        \"color\": \"#7570B3\",\n        \"children\": [{\n          \"name\": \"Governamental\",\n          \"id\": \"Governamental\",\n          \"color\": \"#66A61D\",\n          \"value\": 200\n        }, {\n          \"name\": \"Privado\",\n          \"id\": \"Privada\",\n          \"color\": \"#7570B3\",\n          \"value\": 400\n        }]\n      }, {\n        \"name\": \"Orgão de fomento\",\n        \"id\": \"Orgão de fomento\",\n        \"color\": \"#E7298A\",\n        \"children\": [{\n          \"name\": \"Nacional\",\n          \"id\": \"Nacional\",\n          \"color\": \"#E7298A\",\n          \"value\": 100\n        }, {\n          \"name\": \"Internacional\",\n          \"id\": \"Internacional\",\n          \"color\": \"#66A61D\",\n          \"value\": 100\n        }]\n      }, {\n        \"name\": \"Governamental\",\n        \"id\": \"Governamental\",\n        \"color\": \"#66A61D\",\n        \"children\": [{\n          \"name\": \"Estadual\",\n          \"id\": \"Estadual\",\n          \"color\": \"#E6AB01\",\n          \"value\": 100\n        }, {\n          \"name\": \"Nacional\",\n          \"id\": \"Nacional\",\n          \"color\": \"#E7298A\",\n          \"value\": 100\n        }]\n      }, {\n        \"name\": \"Organizações da Sociedade Civil\",\n        \"id\": \"OSC\",\n        \"color\": \"#E6AB01\",\n        \"children\": [{\n          \"name\": \"Atividades de associações de defesa de direitos sociais\",\n          \"id\": \"Atividades de associações de defesa de direitos sociais\",\n          \"color\": \"#A6761D\",\n          \"value\": 100\n        }, {}]\n      }]\n    },\n        nodes = d3.hierarchy(data).sum(function (d) {\n      return d.value ? 1 : 0;\n    }),\n        //.sort(function(a, b) { return b.height - a.height || b.value - a.value });\n    currentDepth;\n    treemap(nodes);\n    var chart = d3.select(\"#chart\");\n    var cells = chart.selectAll(\".node\").data(nodes.descendants()).enter().append(\"div\").attr(\"class\", function (d) {\n      return \"node level-\" + d.depth;\n    }).attr(\"title\", function (d) {\n      return d.data.name ? d.data.name : \"null\";\n    });\n    cells.style(\"left\", function (d) {\n      return x(d.x0) + \"%\";\n    }).style(\"top\", function (d) {\n      return y(d.y0) + \"%\";\n    }).style(\"width\", function (d) {\n      return x(d.x1) - x(d.x0) + \"%\";\n    }).style(\"height\", function (d) {\n      return y(d.y1) - y(d.y0) + \"%\";\n    }) //.style(\"background-image\", function(d) { return d.value ? imgUrl + d.value : \"\"; })\n    //.style(\"background-image\", function(d) { return d.value ? \"url(http://placekitten.com/g/300/300)\" : \"none\"; }) \n    .style(\"background-color\", function (d) {\n      return d.data.color;\n    }).on(\"click\", zoom).append(\"p\").attr(\"class\", \"label\").text(function (d) {\n      return d.data.name ? d.data.name : \"---\";\n    }); //.style(\"font-size\", \"\")\n    //.style(\"opacity\", function(d) { return isOverflowed( d.parent ) ? 1 : 0; });\n\n    var parent = d3.select(\".up\").datum(nodes).on(\"click\", zoom);\n\n    function zoom(d) {\n      // http://jsfiddle.net/ramnathv/amszcymq/\n      d3.select(\".up\").datum(nodes).style(\"background-color\", function () {\n        return d.data.children ? d.data.color : d.parent.data.color;\n      }).style(\"color\", function () {\n        return d.depth > 0 ? \"white\" : \"gray\";\n      }).style(\"border\", function () {\n        return d.depth > 0 ? \"none\" : \"1px solid gray\";\n      }).text(d.data.children ? d.data.name : d.parent.data.name);\n      currentDepth = d.depth;\n      parent.datum(d.parent || nodes);\n      x.domain([d.x0, d.x1]);\n      y.domain([d.y0, d.y1]); // var t = d3.transition()\n      //   \t.duration(800)\n      //   \t.ease(d3.easeCubicOut);\n\n      cells // .transition()           // apply a transition\n      .style(\"left\", function (d) {\n        return x(d.x0) + \"%\";\n      }).style(\"top\", function (d) {\n        return y(d.y0) + \"%\";\n      }).style(\"width\", function (d) {\n        return x(d.x1) - x(d.x0) + \"%\";\n      }).style(\"height\", function (d) {\n        return y(d.y1) - y(d.y0) + \"%\";\n      });\n      cells // hide this depth and above\n      .filter(function (d) {\n        return d.ancestors();\n      }).classed(\"hide\", function (d) {\n        return d.children ? true : false;\n      });\n      cells // show this depth + 1 and below\n      .filter(function (d) {\n        return d.depth > currentDepth;\n      }).classed(\"hide\", false);\n    }\n  }\n\n  render() {\n    const {\n      markers,\n      searchResult\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"map-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Map, {\n      markers: markers,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"chart-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(SearchBox, {\n      onSearchChange: this.onSearchChange,\n      onSearchResultClick: this.onSearchResultClick,\n      searchResults: searchResult.filter((ele, index) => index < 6),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sunburst-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"nav\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"up\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 4\n      }\n    }, \"Atores do Semi\\xE1rido\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"feature\",\n      id: \"chart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 4\n      }\n    }))));\n  }\n\n}\n\nexport default Chart;","map":{"version":3,"sources":["/Users/samirsilva/org-chart/src/sunburst/sunburst.component.jsx"],"names":["React","Component","d3","Map","SearchBox","Chart","constructor","state","componentDidMount","width","height","x","scaleLinear","domain","range","y","colors","color","scaleOrdinal","map","c","rgb","treemap","size","paddingInner","round","data","nodes","hierarchy","sum","d","value","currentDepth","chart","select","cells","selectAll","descendants","enter","append","attr","depth","name","style","x0","y0","x1","y1","on","zoom","text","parent","datum","children","filter","ancestors","classed","render","markers","searchResult","onSearchChange","onSearchResultClick","ele","index"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,KAAKC,EAAZ,MAAoB,IAApB;AACA,OAAOC,GAAP,MAAgB,sBAAhB;AACA,OAAOC,SAAP,MAAsB,4BAAtB;AAEA,OAAO,wBAAP;;AAIA,MAAMC,KAAN,SAAoBJ,SAApB,CAA8B;AAG5BK,EAAAA,WAAW,GAAG;AACZ;AACA,SAAKC,KAAL,GAAa,EAAb;AAGD;;AAMFC,EAAAA,iBAAiB,GAAG;AASjB,QAAIC,KAAK,GAAG,GAAZ;AAAA,QAAiBC,MAAM,GAAG,GAA1B;AAAA,QAA+B;AAGlCC,IAAAA,CAAC,GAAGT,EAAE,CAACU,WAAH,GAAiBC,MAAjB,CAAwB,CAAC,CAAD,EAAIJ,KAAJ,CAAxB,EAAoCK,KAApC,CAA0C,CAAC,CAAD,EAAIL,KAAJ,CAA1C,CAHD;AAAA,QAIAM,CAAC,GAAGb,EAAE,CAACU,WAAH,GAAiBC,MAAjB,CAAwB,CAAC,CAAD,EAAIH,MAAJ,CAAxB,EAAqCI,KAArC,CAA2C,CAAC,CAAD,EAAIJ,MAAJ,CAA3C,CAJJ;AAAA,QAKHM,MAAM,GAAE,CAAC,SAAD,EAAY,SAAZ,EAAuB,SAAvB,EAAkC,SAAlC,EAA6C,SAA7C,EAAwD,SAAxD,EAAmE,SAAnE,EAA8E,SAA9E,CALL;AAAA,QAOHC,KAAK,GAAGf,EAAE,CAACgB,YAAH,GACNJ,KADM,CACAE,MAAM,CACXG,GADK,CACD,UAASC,CAAT,EAAY;AAChBA,MAAAA,CAAC,GAAGlB,EAAE,CAACmB,GAAH,CAAOD,CAAP,CAAJ,CADgB,CAEhB;;AACA,aAAOA,CAAP;AACA,KALK,CADA,CAPL;AAAA,QAgBHE,OAAO,GAAGpB,EAAE,CAACoB,OAAH,GACLC,IADK,CACA,CAACd,KAAD,EAAQC,MAAR,CADA,EAET;AAFS,KAGLc,YAHK,CAGQ,CAHR,EAILC,KAJK,CAIC,KAJD,CAhBP;AAAA,QAoBgB;AAEnBC,IAAAA,IAAI,GAAG;AACP,cAAQ,qBADD;AAEP,YAAM,qBAFC;AAGP,eAAS,SAHF;AAIP,kBAAY,CACX;AACC,gBAAQ,gCADT;AAEC,cAAM,gCAFP;AAGC,iBAAS,SAHV;AAKC,oBAAY,CACX;AACC,kBAAQ,qBADT;AAEC,gBAAM,IAFP;AAGC,mBAAS,SAHV;AAIC,mBAAS;AAJV,SADW,EAOX;AACC,kBAAQ,wBADT;AAEC,gBAAM,IAFP;AAGC,mBAAS,SAHV;AAIC,mBAAS;AAJV,SAPW,EAaX;AACC,kBAAQ,yBADT;AAEC,gBAAM,IAFP;AAGC,mBAAS,SAHV;AAIC,mBAAS;AAJV,SAbW,EAmBX;AACC,kBAAQ,wBADT;AAEC,gBAAM,SAFP;AAGC,mBAAS,SAHV;AAIC,mBAAS;AAJV,SAnBW;AALb,OADW,EAiCX;AACC,gBAAQ,wBADT;AAEC,cAAM,wBAFP;AAGC,iBAAS,SAHV;AAIC,oBAAY,CACX;AACC,kBAAQ,eADT;AAEC,gBAAM,eAFP;AAGC,mBAAS,SAHV;AAIC,mBAAS;AAJV,SADW,EAOX;AACC,kBAAQ,SADT;AAEC,gBAAM,SAFP;AAGC,mBAAS,SAHV;AAIC,mBAAS;AAJV,SAPW;AAJb,OAjCW,EAoDX;AACC,gBAAQ,kBADT;AAEC,cAAM,kBAFP;AAGC,iBAAS,SAHV;AAIC,oBAAY,CACX;AACC,kBAAQ,UADT;AAEC,gBAAM,UAFP;AAGC,mBAAS,SAHV;AAIC,mBAAS;AAJV,SADW,EAOX;AACC,kBAAQ,eADT;AAEC,gBAAM,eAFP;AAGC,mBAAS,SAHV;AAIC,mBAAS;AAJV,SAPW;AAJb,OApDW,EAuEX;AACC,gBAAQ,eADT;AAEC,cAAM,eAFP;AAGC,iBAAS,SAHV;AAIC,oBAAY,CACX;AACC,kBAAQ,UADT;AAEC,gBAAM,UAFP;AAGC,mBAAS,SAHV;AAIC,mBAAS;AAJV,SADW,EAOX;AACC,kBAAQ,UADT;AAEC,gBAAM,UAFP;AAGC,mBAAS,SAHV;AAIC,mBAAS;AAJV,SAPW;AAJb,OAvEW,EA0FX;AACC,gBAAQ,iCADT;AAEC,cAAM,KAFP;AAGC,iBAAS,SAHV;AAIC,oBAAY,CAEX;AACC,kBAAQ,yDADT;AAEC,gBAAM,yDAFP;AAGC,mBAAS,SAHV;AAIC,mBAAS;AAJV,SAFW,EAQX,EARW;AAJb,OA1FW;AAJL,KAtBJ;AAAA,QAyIHC,KAAK,GAAGzB,EAAE,CAAC0B,SAAH,CAAaF,IAAb,EACNG,GADM,CACF,UAASC,CAAT,EAAY;AAAE,aAAOA,CAAC,CAACC,KAAF,GAAU,CAAV,GAAc,CAArB;AAAyB,KADrC,CAzIL;AAAA,QA2IF;AAEDC,IAAAA,YA7IG;AA+IJV,IAAAA,OAAO,CAACK,KAAD,CAAP;AAKA,QAAIM,KAAK,GAAG/B,EAAE,CAACgC,MAAH,CAAU,QAAV,CAAZ;AACA,QAAIC,KAAK,GAAGF,KAAK,CACfG,SADU,CACA,OADA,EAEVV,IAFU,CAELC,KAAK,CAACU,WAAN,EAFK,EAGVC,KAHU,GAIVC,MAJU,CAIH,KAJG,EAKVC,IALU,CAKL,OALK,EAKI,UAASV,CAAT,EAAY;AAAE,aAAO,gBAAgBA,CAAC,CAACW,KAAzB;AAAiC,KALnD,EAMVD,IANU,CAML,OANK,EAMI,UAASV,CAAT,EAAY;AAAE,aAAOA,CAAC,CAACJ,IAAF,CAAOgB,IAAP,GAAcZ,CAAC,CAACJ,IAAF,CAAOgB,IAArB,GAA4B,MAAnC;AAA4C,KAN9D,CAAZ;AAQAP,IAAAA,KAAK,CACHQ,KADF,CACQ,MADR,EACgB,UAASb,CAAT,EAAY;AAAE,aAAOnB,CAAC,CAACmB,CAAC,CAACc,EAAH,CAAD,GAAU,GAAjB;AAAuB,KADrD,EAEED,KAFF,CAEQ,KAFR,EAEe,UAASb,CAAT,EAAY;AAAE,aAAOf,CAAC,CAACe,CAAC,CAACe,EAAH,CAAD,GAAU,GAAjB;AAAuB,KAFpD,EAGEF,KAHF,CAGQ,OAHR,EAGiB,UAASb,CAAT,EAAY;AAAE,aAAOnB,CAAC,CAACmB,CAAC,CAACgB,EAAH,CAAD,GAAUnC,CAAC,CAACmB,CAAC,CAACc,EAAH,CAAX,GAAoB,GAA3B;AAAiC,KAHhE,EAIED,KAJF,CAIQ,QAJR,EAIkB,UAASb,CAAT,EAAY;AAAE,aAAOf,CAAC,CAACe,CAAC,CAACiB,EAAH,CAAD,GAAUhC,CAAC,CAACe,CAAC,CAACe,EAAH,CAAX,GAAoB,GAA3B;AAAiC,KAJjE,EAKC;AACA;AAND,KAOEF,KAPF,CAOQ,kBAPR,EAO4B,UAASb,CAAT,EAAY;AAAC,aAAOA,CAAC,CAACJ,IAAF,CAAOT,KAAd;AAAsB,KAP/D,EAQE+B,EARF,CAQK,OARL,EAQcC,IARd,EASEV,MATF,CASS,GATT,EAUEC,IAVF,CAUO,OAVP,EAUgB,OAVhB,EAWEU,IAXF,CAWO,UAASpB,CAAT,EAAY;AAAE,aAAOA,CAAC,CAACJ,IAAF,CAAOgB,IAAP,GAAcZ,CAAC,CAACJ,IAAF,CAAOgB,IAArB,GAA4B,KAAnC;AAA2C,KAXhE,EAtKqB,CAkLpB;AACA;;AAED,QAAIS,MAAM,GAAGjD,EAAE,CAACgC,MAAH,CAAU,KAAV,EACVkB,KADU,CACJzB,KADI,EAEXqB,EAFW,CAER,OAFQ,EAECC,IAFD,CAAb;;AAIA,aAASA,IAAT,CAAcnB,CAAd,EAAiB;AAAE;AAEjB5B,MAAAA,EAAE,CAACgC,MAAH,CAAU,KAAV,EACCkB,KADD,CACOzB,KADP,EAECgB,KAFD,CAEO,kBAFP,EAE2B,YAAW;AAAC,eAAOb,CAAC,CAACJ,IAAF,CAAO2B,QAAP,GAAiBvB,CAAC,CAACJ,IAAF,CAAOT,KAAxB,GAA+Ba,CAAC,CAACqB,MAAF,CAASzB,IAAT,CAAcT,KAApD;AAA4D,OAFnG,EAGC0B,KAHD,CAGO,OAHP,EAGgB,YAAW;AAAC,eAAOb,CAAC,CAACW,KAAF,GAAQ,CAAR,GAAW,OAAX,GAAoB,MAA3B;AAAmC,OAH/D,EAICE,KAJD,CAIO,QAJP,EAIiB,YAAW;AAAC,eAAOb,CAAC,CAACW,KAAF,GAAQ,CAAR,GAAW,MAAX,GAAmB,gBAA1B;AAA4C,OAJzE,EAKCS,IALD,CAKMpB,CAAC,CAACJ,IAAF,CAAO2B,QAAP,GAAiBvB,CAAC,CAACJ,IAAF,CAAOgB,IAAxB,GAA8BZ,CAAC,CAACqB,MAAF,CAASzB,IAAT,CAAcgB,IALlD;AAODV,MAAAA,YAAY,GAAGF,CAAC,CAACW,KAAjB;AACAU,MAAAA,MAAM,CAACC,KAAP,CAAatB,CAAC,CAACqB,MAAF,IAAYxB,KAAzB;AAEAhB,MAAAA,CAAC,CAACE,MAAF,CAAS,CAACiB,CAAC,CAACc,EAAH,EAAOd,CAAC,CAACgB,EAAT,CAAT;AACA/B,MAAAA,CAAC,CAACF,MAAF,CAAS,CAACiB,CAAC,CAACe,EAAH,EAAOf,CAAC,CAACiB,EAAT,CAAT,EAbgB,CAehB;AACC;AACA;;AAEDZ,MAAAA,KAAK,CACJ;AADI,OAEHQ,KAFF,CAEQ,MAFR,EAEgB,UAASb,CAAT,EAAY;AAAE,eAAOnB,CAAC,CAACmB,CAAC,CAACc,EAAH,CAAD,GAAU,GAAjB;AAAuB,OAFrD,EAGED,KAHF,CAGQ,KAHR,EAGe,UAASb,CAAT,EAAY;AAAE,eAAOf,CAAC,CAACe,CAAC,CAACe,EAAH,CAAD,GAAU,GAAjB;AAAuB,OAHpD,EAIEF,KAJF,CAIQ,OAJR,EAIiB,UAASb,CAAT,EAAY;AAAE,eAAOnB,CAAC,CAACmB,CAAC,CAACgB,EAAH,CAAD,GAAUnC,CAAC,CAACmB,CAAC,CAACc,EAAH,CAAX,GAAoB,GAA3B;AAAiC,OAJhE,EAKED,KALF,CAKQ,QALR,EAKkB,UAASb,CAAT,EAAY;AAAE,eAAOf,CAAC,CAACe,CAAC,CAACiB,EAAH,CAAD,GAAUhC,CAAC,CAACe,CAAC,CAACe,EAAH,CAAX,GAAoB,GAA3B;AAAiC,OALjE;AAOAV,MAAAA,KAAK,CAAC;AAAD,OACHmB,MADF,CACS,UAASxB,CAAT,EAAY;AAAE,eAAOA,CAAC,CAACyB,SAAF,EAAP;AAAuB,OAD9C,EAEEC,OAFF,CAEU,MAFV,EAEkB,UAAS1B,CAAT,EAAY;AAAE,eAAOA,CAAC,CAACuB,QAAF,GAAa,IAAb,GAAoB,KAA3B;AAAkC,OAFlE;AAIAlB,MAAAA,KAAK,CAAC;AAAD,OACHmB,MADF,CACS,UAASxB,CAAT,EAAY;AAAE,eAAOA,CAAC,CAACW,KAAF,GAAUT,YAAjB;AAAgC,OADvD,EAEEwB,OAFF,CAEU,MAFV,EAEkB,KAFlB;AAIA;AACA;;AAIAC,EAAAA,MAAM,GAAG;AACN,UAAM;AAACC,MAAAA,OAAD;AAASC,MAAAA;AAAT,QAAyB,KAAKpD,KAApC;AAEH,wBAAO;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACF,oBAAC,GAAD;AAAK,MAAA,OAAO,EAAEmD,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADE,eAEL;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC,oBAAC,SAAD;AAAW,MAAA,cAAc,EAAE,KAAKE,cAAhC;AAAgD,MAAA,mBAAmB,EAAE,KAAKC,mBAA1E;AAA+F,MAAA,aAAa,EAAEF,YAAY,CAACL,MAAb,CAAoB,CAACQ,GAAD,EAAKC,KAAL,KAAcA,KAAK,GAAC,CAAxC,CAA9G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,eAEC;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAK,MAAA,SAAS,EAAC,IAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCADA,CADC,eAID;AAAK,MAAA,SAAS,EAAC,SAAf;AAAyB,MAAA,EAAE,EAAC,OAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJC,CAFD,CAFK,CAAP;AAaC;;AA9P4B;;AAiQ9B,eAAe1D,KAAf","sourcesContent":["import React, { Component } from \"react\";\nimport * as d3 from \"d3\";\nimport Map from '../map/map.component'\nimport SearchBox from '../search/search.component'\n\nimport \"./sunburst.styles.scss\";\n\n\n\nclass Chart extends Component {\n\n\n  constructor() {\n    super()\n    this.state = {\n\t  \n    }\n  }\n\n  \n\n\n\n\tcomponentDidMount() {\n\n\t\n\n\t\n\t \n\n\n   \n    var width = 100, height = 100, // % of the parent element\n    \n\t\n\tx = d3.scaleLinear().domain([0, width]).range([0, width]),\n    y = d3.scaleLinear().domain([0, height]).range([0, height]),\n\tcolors =[\"#1b9e77\", \"#d95f02\", \"#7570b3\", \"#e7298a\", \"#66a61e\", \"#e6ab02\", \"#a6761d\", \"#666666\"]\n  ,\n\tcolor = d3.scaleOrdinal()\n\t\t.range(colors\n\t\t\t.map(function(c) { \n\t\t\t\tc = d3.rgb(c); \n\t\t\t\t//c.opacity = 0.5; \n\t\t\t\treturn c; \n\t\t\t})\n\t\t),\n\t\n\ttreemap = d3.treemap()\n    \t.size([width, height])\n\t\t//.tile(d3.treemapResquarify) // doesn't work - height & width is 100%\n    \t.paddingInner(0)\n    \t.round(false), //true\n\n\tdata = {\n\t\"name\": \"Atores do Semiárido\",\n\t\"id\": \"Atores do Semiárido\",\n\t\"color\": \"#ffffff\",\n\t\"children\": [\n\t\t{\n\t\t\t\"name\": \"Instituição de Ensino Superior\",\n\t\t\t\"id\": \"Instituição de Ensino Superior\",\n\t\t\t\"color\": \"#D95F03\",\n\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"name\": \"Institutos Federais\",\n\t\t\t\t\t\"id\": \"IF\",\n\t\t\t\t\t\"color\": \"#A6761D\",\n\t\t\t\t\t\"value\": 100\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"name\": \"Universidades Federais\",\n\t\t\t\t\t\"id\": \"UF\",\n\t\t\t\t\t\"color\": \"#666666\",\n\t\t\t\t\t\"value\": 100\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"name\": \"Universidades Estaduais\",\n\t\t\t\t\t\"id\": \"UE\",\n\t\t\t\t\t\"color\": \"#249E77\",\n\t\t\t\t\t\"value\": 100\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"name\": \"Universidades Privadas\",\n\t\t\t\t\t\"id\": \"Privada\",\n\t\t\t\t\t\"color\": \"#D95F03\",\n\t\t\t\t\t\"value\": 100\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Institutos de Pesquisa\",\n\t\t\t\"id\": \"Institutos de Pesquisa\",\n\t\t\t\"color\": \"#7570B3\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"name\": \"Governamental\",\n\t\t\t\t\t\"id\": \"Governamental\",\n\t\t\t\t\t\"color\": \"#66A61D\",\n\t\t\t\t\t\"value\": 200\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"name\": \"Privado\",\n\t\t\t\t\t\"id\": \"Privada\",\n\t\t\t\t\t\"color\": \"#7570B3\",\n\t\t\t\t\t\"value\": 400\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Orgão de fomento\",\n\t\t\t\"id\": \"Orgão de fomento\",\n\t\t\t\"color\": \"#E7298A\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"name\": \"Nacional\",\n\t\t\t\t\t\"id\": \"Nacional\",\n\t\t\t\t\t\"color\": \"#E7298A\",\n\t\t\t\t\t\"value\": 100\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"name\": \"Internacional\",\n\t\t\t\t\t\"id\": \"Internacional\",\n\t\t\t\t\t\"color\": \"#66A61D\",\n\t\t\t\t\t\"value\": 100\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Governamental\",\n\t\t\t\"id\": \"Governamental\",\n\t\t\t\"color\": \"#66A61D\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"name\": \"Estadual\",\n\t\t\t\t\t\"id\": \"Estadual\",\n\t\t\t\t\t\"color\": \"#E6AB01\",\n\t\t\t\t\t\"value\": 100\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"name\": \"Nacional\",\n\t\t\t\t\t\"id\": \"Nacional\",\n\t\t\t\t\t\"color\": \"#E7298A\",\n\t\t\t\t\t\"value\": 100\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Organizações da Sociedade Civil\",\n\t\t\t\"id\": \"OSC\",\n\t\t\t\"color\": \"#E6AB01\",\n\t\t\t\"children\": [\n\t\n\t\t\t\t{\n\t\t\t\t\t\"name\": \"Atividades de associações de defesa de direitos sociais\",\n\t\t\t\t\t\"id\": \"Atividades de associações de defesa de direitos sociais\",\n\t\t\t\t\t\"color\": \"#A6761D\",\n\t\t\t\t\t\"value\": 100\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\n\t\t\t\t}\n\n\t\t\t]\n\t\t}\n\t]\n},\n\t\n\tnodes = d3.hierarchy(data)\n\t\t.sum(function(d) { return d.value ? 1 : 0; }),\n\t\t//.sort(function(a, b) { return b.height - a.height || b.value - a.value });\n\t\n\tcurrentDepth;\n\ntreemap(nodes);\n\n\n\n\nvar chart = d3.select(\"#chart\");\nvar cells = chart\n\t.selectAll(\".node\")\n\t.data(nodes.descendants())\n\t.enter()\n\t.append(\"div\")\n\t.attr(\"class\", function(d) { return \"node level-\" + d.depth; })\n\t.attr(\"title\", function(d) { return d.data.name ? d.data.name : \"null\"; });\n\ncells\n\t.style(\"left\", function(d) { return x(d.x0) + \"%\"; })\n\t.style(\"top\", function(d) { return y(d.y0) + \"%\"; })\n\t.style(\"width\", function(d) { return x(d.x1) - x(d.x0) + \"%\"; })\n\t.style(\"height\", function(d) { return y(d.y1) - y(d.y0) + \"%\"; })\n\t//.style(\"background-image\", function(d) { return d.value ? imgUrl + d.value : \"\"; })\n\t//.style(\"background-image\", function(d) { return d.value ? \"url(http://placekitten.com/g/300/300)\" : \"none\"; }) \n\t.style(\"background-color\", function(d) {return d.data.color; })\n\t.on(\"click\", zoom)\n\t.append(\"p\")\n\t.attr(\"class\", \"label\")\n\t.text(function(d) { return d.data.name ? d.data.name : \"---\"; });\n\t//.style(\"font-size\", \"\")\n\t//.style(\"opacity\", function(d) { return isOverflowed( d.parent ) ? 1 : 0; });\n\nvar parent = d3.select(\".up\")\n  .datum(nodes)\n\t.on(\"click\", zoom);\n\nfunction zoom(d) { // http://jsfiddle.net/ramnathv/amszcymq/\n  \n  d3.select(\".up\")\n  .datum(nodes)\n  .style(\"background-color\", function() {return d.data.children? d.data.color: d.parent.data.color; })\n  .style(\"color\", function() {return d.depth>0? \"white\": \"gray\" })\n  .style(\"border\", function() {return d.depth>0? \"none\": \"1px solid gray\" })\n  .text(d.data.children? d.data.name: d.parent.data.name);\n  \n\tcurrentDepth = d.depth;\n\tparent.datum(d.parent || nodes);\n\t\n\tx.domain([d.x0, d.x1]);\n\ty.domain([d.y0, d.y1]);\n\t\n\t// var t = d3.transition()\n  //   \t.duration(800)\n  //   \t.ease(d3.easeCubicOut);\n\t\n\tcells\n  // .transition()           // apply a transition\n  .style(\"left\", function(d) { return x(d.x0) + \"%\"; })\n\t\t.style(\"top\", function(d) { return y(d.y0) + \"%\"; })\n\t\t.style(\"width\", function(d) { return x(d.x1) - x(d.x0) + \"%\"; })\n\t\t.style(\"height\", function(d) { return y(d.y1) - y(d.y0) + \"%\"; });\n\t\n\tcells // hide this depth and above\n\t\t.filter(function(d) { return d.ancestors(); })\n\t\t.classed(\"hide\", function(d) { return d.children ? true : false });\n\t\n\tcells // show this depth + 1 and below\n\t\t.filter(function(d) { return d.depth > currentDepth; })\n\t\t.classed(\"hide\", false);\n\t\n}\n}\n\n\n\n\trender() {\n    const {markers,searchResult} = this.state;\n    \n\treturn <div className=\"map-container\">\n      <Map markers={markers}></Map>\n\t  <div className=\"chart-container\">\n\t\t  <SearchBox onSearchChange={this.onSearchChange} onSearchResultClick={this.onSearchResultClick} searchResults={searchResult.filter((ele,index)=> index<6)}></SearchBox>\n\t\t  <div className='sunburst-container'>\n\t\t\t<nav>\n\t\t\t<div className=\"up\">Atores do Semiárido</div>\n\t\t\t</nav>\n\t\t\t<div className=\"feature\" id=\"chart\"></div>\n\t\t</div>\n\t  </div>\n      \n    </div>\n\t}\n}\n\nexport default Chart;\n"]},"metadata":{},"sourceType":"module"}